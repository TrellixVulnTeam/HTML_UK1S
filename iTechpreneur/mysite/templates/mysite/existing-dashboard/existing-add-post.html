{% extends 'mysite/existing-dashboard/existing-main.html' %}
{% load static %}
{% block content %}
        <div class="wrapper-data">
          <div class="row">
            <div class="col-12 program-data">
              <div class="post-box">
                  <div class="add-program">
                      <div class="page-title">
                        <h1 class="hdg">Add New Post</h1>
                      </div>
                        <div class="row">
                            <div class="col-md-6 form-parts m-auto">
                            <form method="POST" id="existing-post-submit" name="existing-post-submit" action="{% url 'mysite:existing-add-post' %}" enctype="multipart/form-data">{% csrf_token %}
                                <div class="row">
                                  <div class="col-md-12 form-parts">
                                    <div class="form-group">
                                    <input type="hidden" name="user_id" id="user_id" value="{{ user.id }}">
                                    <input type="text" class="form-control" id="post_title" onkeyup="function_remove1()" name="post_title" placeholder="Post Title">
                                    </div>
                                  </div>
                                  <div class="col-md-12 form-parts text-parts">
                                    <div class="form-group">
                                      <div class="for-upload">
                                      <textarea class="form-control" id="post_text" onkeyup="function_remove2()" name="post_text" placeholder="Enter your details here..."></textarea>
                                       <div class="upload-icons">
                                           <label> <i class="fas fa-upload" id="file_border" ></i> Photo/Video
                                              <input type="file" id="upload_file" name="upload_file" size="60" onchange="function_remove3()" >
                                            </label> 
                                            <center><p id="upload_file_error"></p></center>
                                        </div>
                                      </div>
                                    </div>
                                  </div>

                                  <div class="col-md-12 text-right">
                                      <button type="submit" class="btn btn-yellow" id="existing_add_post_btn">Add</button>
                                  </div>

                                </div>
                                
                              </form>

                            </div>
                          </div>
                  </div>
                </div>
                
              

            </div>

          </div>
        </div>

<style>

  #existing_add_post_btn{
    transition:all ease 0.5s;
  }
  .active{
    font-size: 0;
    width: 50px;
    height: 50px;
    border: 3px solid yellow;
    border-radius: 50%;
    background-color: transparent;
    border-left-color: transparent;
    animation: rotate 1.4s ease 0.5s infinite;
  }
 
  @keyframes rotate{
    0%{
      transform: rotate(360deg);
    }
  }
</style>

  <script type="text/javascript">
  $("#existing-post-submit").submit(function(e){
        e.preventDefault();
        console.log('dddd')
        $('#existing_add_post_btn').addClass("active");
        $('#existing_add_post_btn').removeClass("btn-yellow");
        if($('#post_title').val())
        {
          $('#post_title').removeClass('error_message')
        }
        else
        {
          $('#post_title').addClass('error_message')
          $('#existing_add_post_btn').addClass("btn-yellow");
          $('#existing_add_post_btn').removeClass("active");
          return false;
        }

        if($('#post_text').val())
        {
          $('#post_text').removeClass('error_message')
        }
        else
        {
          $('#post_text').addClass('error_message')
          $('#existing_add_post_btn').addClass("btn-yellow");
          $('#existing_add_post_btn').removeClass("active");
          return false;
        }

        if($('#upload_file').val())
        {
          $('#upload_file_error').text('')
        }
        else
        {
         $("#upload_file_error").text('Please upload a file.');
          document.getElementById("upload_file_error").style.color = "red"; 
          $('#existing_add_post_btn').addClass("btn-yellow");
          $('#existing_add_post_btn').removeClass("active");  
          return false;
        }

        $('#existing-post-submit')[0].submit();
        $('#existing_add_post_btn').addClass("btn-yellow");
        $('#existing_add_post_btn').removeClass("active");
    });
</script>
<script type="text/javascript">
  function function_remove1(){
    console.log('dddd')
        if($('#post_title').val())
        {
          $('#post_title').removeClass('error_message')
        }
      }
</script>
<script type="text/javascript">
  function function_remove2(){
    console.log('dddd')
        if($('#post_text').val())
        {
          $('#post_text').removeClass('error_message')
        }
      }
</script>
<script type="text/javascript">
  function function_remove3(){
    console.log('dddd')
        if($('#upload_file').val())
        {
           $('#upload_file_error').text('')
        }
      }

</script>

{% endblock %}


