{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Teen TechPreneur</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css">
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

  <link rel="stylesheet" href="{% static 'mysite/css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'mysite/css/style.css' %}">
  <link rel="stylesheet" href="{% static 'mysite/css/dashboard-style.css' %}">
</head>
<body>

<section class="layout-main">
  <div class="sidebar">
    <div class="sidebar-inner">
        <div class="logo-bar">
          <a href="">
            <img src="{% static 'mysite/images/logo.png' %}" />
          </a>
        </div>
        <div class="menu-bar">
          <ul class="main-menu">
            <li class="active">
              <a href="{% url 'mysite:future-dashboard' %}" ><i class="fas fa-tachometer-alt"></i> <span>Dashboard</span></a>
            </li>
            <li>
              <a href="{% url 'mysite:future-profile' %}" ><i class="fas fa-user"></i> <span>Profile</span></a>
            </li>
           
            <li>
              <a href="{% url 'mysite:future-explore' %}" ><i class="fas fa-user"></i> <span>Explore</span></a>
            </li>
             <li>
              <a href="{% url 'mysite:future-add-post' %}" ><i class="fas fa-user"></i> <span>Add Post</span></a>
            </li>
<!--              <li>
              <a href="#" ><i class="fas fa-user"></i> <span>Messaging</span></a>
            </li> -->
            
          </ul>
        </div>
    </div>
  </div>

  <div class="content-wrapper">
    <div class="wrapper-inner">
      <div class="row">
        <div class="col-8 left-data">
        <div class="top-bar">
         
            <div class="bar-left">
              <div class="form-group form-parts mb-0">
                <!-- <input type="text" class="form-control" placeholder="Search here..."> -->
              </div>
            </div>

          <div class="bar-right">
            <div class="dropdown profile-drop">
              <button type="button" class="btn dropdown-toggle" data-toggle="dropdown">
                <div class="for-img">
                  <img src="{% static 'mysite/images/avatar.png' %}" />
                </div>
                <div class="for-des"></div>
              </button>
              <div class="dropdown-menu">
              <a class="dropdown-item" href="{% url 'mysite:logout' %}">Logout</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
<!--
        <div class="inbox_people">
          <div class="headind_srch">
            <div class="recent_heading">
              <h4>Recent</h4>
            </div>
            <div class="srch_bar">
              <div class="stylish-input-group">
                <input type="text" class="search-bar"  placeholder="Search" >
                <span class="input-group-addon">
                <button type="button"> <i class="fa fa-search" aria-hidden="true"></i> </button>
                </span> </div>
            </div>
          </div>
          <div class="inbox_chat">
            <div class="chat_list active_chat">
              <div class="chat_people">
                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
                <div class="chat_ib">
                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
                  <p>Test, which is a new approach to have all solutions 
                    astrology under one roof.</p>
                </div>
              </div>
            </div>
            <div class="chat_list">
              <div class="chat_people">
                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
                <div class="chat_ib">
                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
                  <p>Test, which is a new approach to have all solutions 
                    astrology under one roof.</p>
                </div>
              </div>
            </div>
            <div class="chat_list">
              <div class="chat_people">
                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
                <div class="chat_ib">
                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
                  <p>Test, which is a new approach to have all solutions 
                    astrology under one roof.</p>
                </div>
              </div>
            </div>
            <div class="chat_list">
              <div class="chat_people">
                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
                <div class="chat_ib">
                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
                  <p>Test, which is a new approach to have all solutions 
                    astrology under one roof.</p>
                </div>
              </div>
            </div>
            <div class="chat_list">
              <div class="chat_people">
                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
                <div class="chat_ib">
                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
                  <p>Test, which is a new approach to have all solutions 
                    astrology under one roof.</p>
                </div>
              </div>
            </div>
            <div class="chat_list">
              <div class="chat_people">
                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
                <div class="chat_ib">
                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
                  <p>Test, which is a new approach to have all solutions 
                    astrology under one roof.</p>
                </div>
              </div>
            </div>
            <div class="chat_list">
              <div class="chat_people">
                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
                <div class="chat_ib">
                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
                  <p>Test, which is a new approach to have all solutions 
                    astrology under one roof.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

      -->
     
        <!---Inbox People -->
      <!--Users List-->

      
      <div class="container bootstrap snippet">
        <div class="row">
            <div class="col-lg-8">
                <div class="main-box no-header clearfix">
                    <div class="main-box-body clearfix">
                        <div class="table-responsive">
                          {% if all_users %}
                            <table class="table user-list">
                                
                                <tbody>
                                  {% for i in all_users %}
                                    <tr>
                                        <td>
                                          
    {{i.u}}  {{i.u}}                        <img src="https://bootdey.com/img/Content/user_1.jpg" alt="">
                                            <a href="#" class="user-link">{{i.first_name}} {{i.surname}}</a>
                                            <span class="user-subhead" style="font-size:11px;"><span class="badge badge-primary">{{i.technical_subject}}</span>, <span class="badge badge-primary">{{i.country}}</span>  </span>
                                        </td>
                                        
                                        
                                        <td class="text-center">
                                          <form role="form" method="POST" action="{% url 'mysite:future-explore' %}"> {% csrf_token %}
                                            <input type="hidden" name="{{i.user_email}}" id="{{i.user_email}}" value="{{i.user_email}}" hidden>
                                            <input type="hidden" name="{{i.email}}" id="{{i.email}}" value="{{i.email}}" hidden>
                                            
                                            <input type="submit" class="btn btn-primary" id="follow" value="{{i.followText}}">
                                          </form>
                                        </td>
                                    </tr>
                                    {% endfor%}
                                    
                                </tbody>
                            </table>
                            
                            {% else%}
                            <p>There is no User</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
      <!--Users List-->
        
       </div>
       </div>
       </section>
<script>

  $('form').on('submit', function(e){
    e.preventDefault();

    var token =  $(this).find('input').eq(0).val()
    var follower_email =  $(this).find('input').eq(1).val()
    var following_email = $(this).find('input').eq(2).val()
    if($(this).find('input:submit').val()=="Follow")
    {
      $(this).find('input:submit').val("Unfollow")
    }
    else{
      $(this).find('input:submit').val("Follow")
    }
   
    console.log("follow clicked")
    console.log('before ajax')
    $.ajax({
        url: '/future-explore/',
        type: "POST",
        data: { 'following_email': following_email, 'follower_email':follower_email,'csrfmiddlewaretoken':token },
        dataType: 'json',
        cache: false,
        success: function(response){
            if( response =='1'){
                console.log("response",response)
                //$(this).find('input:submit').val("Unfollow")
                
            }
            else if(response=='2'){
              //$(this).find('input:submit').val("follow")
            }
            else{
                console.log(response)
                return false
            }
        }

    });
    console.log("after ajax")
  })

  /*
  $(document).on('click', '#follow', function(e){  

      console.log("event: ",e)
      var input = document.getElementsByTagName('input')[0].name;

      console.log("input ",input);
      
      var token=$('input[name="csrfmiddlewaretoken"]').val();
     

      console.log("follow clicked")
      console.log('before ajax')
      $.ajax({
          url: '/explore/',
          type: "POST",
          data: { 'following_email': following_email, 'follower_email':follower_email,'csrfmiddlewaretoken':token },
          dataType: 'json',
          cache: false,
          success: function(response){
              if( response =='1'){
                  console.log("response",response)
                  $("#follow").html("Unfollow");
                  
              }
              else{
                  console.log(response)
                  return false
              }
          }

      });
      console.log("after ajax")
    });
    */
</script>
      <style>
        .main-box.no-header {
          padding-top: 20px;
      }
      .main-box {
          background: #FFFFFF;
          -webkit-box-shadow: 1px 1px 2px 0 #CCCCCC;
          -moz-box-shadow: 1px 1px 2px 0 #CCCCCC;
          -o-box-shadow: 1px 1px 2px 0 #CCCCCC;
          -ms-box-shadow: 1px 1px 2px 0 #CCCCCC;
          box-shadow: 1px 1px 2px 0 #CCCCCC;
          margin-bottom: 16px;
          -webikt-border-radius: 3px;
          -moz-border-radius: 3px;
          border-radius: 3px;
      }
      .table a.table-link.danger {
          color: #e74c3c;
      }
      .label {
          border-radius: 3px;
          font-size: 0.875em;
          font-weight: 600;
      }
      .user-list tbody td .user-subhead {
          font-size: 0.875em;
          font-style: italic;
      }
      .user-list tbody td .user-link {
          display: block;
          font-size: 1.25em;
          padding-top: 3px;
          margin-left: 60px;
      }
      a {
          color: #3498db;
          outline: none!important;
      }
      .user-list tbody td>img {
          position: relative;
          max-width: 50px;
          float: left;
          margin-right: 15px;
      }
      
      .table thead tr th {
          text-transform: uppercase;
          font-size: 0.875em;
      }
      .table thead tr th {
          border-bottom: 2px solid #e7ebee;
      }
      .table tbody tr td:first-child {
          font-size: 1.125em;
          font-weight: 300;
      }
      .table tbody tr td {
          font-size: 0.875em;
          vertical-align: middle;
          border-top: 1px solid #e7ebee;
          padding: 12px 8px;
      }
      </style>

   <script src="{% static 'mysite/js/bootstrap.min.js' %}"></script>
<script src="{% static 'mysite/css/style.css' %}"></script>

</body>
</html>